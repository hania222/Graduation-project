                   ┌────────────────────────┐
                   │      START PROGRAM      │
                   └────────────┬───────────┘
                                │
                                ▼
                 ┌─────────────────────────────┐
                 │ Initialize Serial (Arduino)  │
                 └─────────────────────────────┘
                                │
                                ▼
                 ┌─────────────────────────────┐
                 │ Initialize Camera (Picam2)   │
                 └─────────────────────────────┘
                                │
                                ▼
                   ┌────────────────────────┐
                   │ Load YOLO Model (v8n)  │
                   └────────────┬───────────┘
                                │
                                ▼
         ┌─────────────────────────────────────────────────┐
         │              START 3 PARALLEL THREADS            │
         └─────────────────────────────────────────────────┘
                                │
       ┌────────────────────────┼──────────────────────────┐
       ▼                        ▼                          ▼

┌────────────────────┐   ┌───────────────────────┐   ┌───────────────────────────┐
│ THREAD 1            │   │ THREAD 2              │   │ THREAD 3                   │
│ Capture Frames      │   │ Detection              │   │ Serial Listener (Arduino)  │
├────────────────────┤   ├───────────────────────┤   ├───────────────────────────┤
│ - Read camera       │   │ - Copy latest frame   │   │ - Read lines from Arduino  │
│ - Update shared     │   │ - YOLO object detect  │   │ - If msg starts with “D:”  │
│   latest_frame      │   │ - Extract label/conf  │   │     → parse distances      │
│ - Loop continuously │   │ - QR code detection   │   │ - Update distance values   │
└────────────────────┘   │ - Draw annotations     │   │ - Movement decision:       │
                         │ - Update output frame  │   │     IF QR found → STOP     │
                         └───────────────────────┘   │     ELSE LEFT? RIGHT?       │
                                                     └───────────────────────────┘

                                │
                                ▼
                   ┌────────────────────────┐
                   │ GUI Display Loop (CV2) │
                   │ - Show annotated frame │
                   │ - Press 'q' → exit     │
                   └────────────┬───────────┘
                                │
                                ▼
                   ┌────────────────────────┐
                   │     STOP FLAG = TRUE   │
                   └────────────┬───────────┘
                                │
                                ▼
             ┌────────────────────────────────────────┐
             │ Join Threads + Close Camera + Serial   │
             └────────────────────────────────────────┘
                                │
                                ▼
                       ┌────────────────────┐
                       │      PROGRAM END    │
                       └────────────────────┘
